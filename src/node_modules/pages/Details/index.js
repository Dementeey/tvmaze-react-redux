import React from 'react';
import myHistory from 'myHistory'
import './index.scss'

export default (props) => {

  const urlID = +myHistory.location.pathname.match(/\d+/g).join();
  let data;

    for (let i = 0; i < Object.keys(props.state.responseData).length; i++) {
      if (props.state.responseData[i].show.id === urlID) {
        data = props.state.responseData[i].show;
      }
    }

  return (
    <div className='details'>
      <h3 className='details__title'>Details of TV-Show</h3>
      <p className='details__promo'>More detailed information about the select TV show</p>
      <div className="details__wrap">

        <div className="details__content">
          <img className='details__img'
               src={ data.image ? data.image.original : 'https://via.placeholder.com/420x650'} alt='img'/>
          <ul className='details__items'>
            <li className="details__item">
              <div className="genres">Genres:	&#8194;
                {data.genres.length ? data.genres.join(' | ') : '-'}
              </div>
            </li>
            <li className="details__item">
              <div className="language">Language:	&#8194;
                {data.language ? data.language : '-'}
              </div>
            </li>
            <li className="details__item">
              <div className="name">Name:	&#8194;
                {data.name ? data.name : '-'}
              </div>
            </li>
            <li className="details__item">
              <div className="officalSite">Official Site:	&#8194;
                <a href="{data.officialSite}" target="_blank">
                  {data.officialSite ? data.officialSite : ''}
                </a>
              </div>
            </li>
            <li className="details__item">
              <div className="premiered">Premiered:	&#8194;
                {data.premiered ? data.premiered : '-'}
              </div>
            </li>
            <li className="details__item">
              <div className="rating">Rating:	&#8194;
                {data.rating.average ? data.rating.average : '-'}
              </div>
            </li>
            <li className="details__item">
              <div className="runtime">Runtime:	&#8194;
                {data.runtime ? data.runtime : '-'} min
              </div>
            </li>
            <li className="details__item">
              <div className="schedule">Schedule:	&#8194;
                <span className="days">
                  {data.schedule.days[0] ? data.schedule.days[0] : '-'}
                </span>
                <span className="Time">
                   	&#8194;at	&#8194; ({data.schedule.time ? data.schedule.time : '-'})
                </span>
              </div>
            </li>
            <li className="details__item">
              <div className="status">Status:	&#8194;
                {data.status ? data.status : '-'}
              </div>
            </li>
            <li className="details__item">
              <div className="type">Type:	&#8194;
                {data.type ? data.type : '-'}
              </div>
            </li>
          </ul>
        </div>

        <div className='details__description'>
          <div className="summary">Summary:	&#8194;
            {data.summary ? data.summary.replace(/(<\/?\w+>){1,}/gm, " " ) : '-'}
          </div>
        </div>

      </div>
    </div>
  );
};

